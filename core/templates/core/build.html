{% extends 'main.html' %}

{% block content %}

<h1 class="build-title">{% if edit_mode %}Edit PC Build{% else %}Build PC Template{% endif %}</h1>
{% if builds %}
    <div class="builds-list">
        <h2 class="builds-list-title">Your Builds</h2>
        <ul class="builds-list-items">
        {% for build in builds %}
            <li class="builds-list-item">
                <b class="builds-list-name">{{ build.Name }}</b> - â‚¹{{ build.Total_Price }}
                <form method="post" action="{% url 'remove-build' build.id %}" class="builds-list-remove-form">
                    {% csrf_token %}
                    <button type="submit" class="builds-list-remove-btn">Remove</button>
                </form>
                <a href="{% url 'edit-build' build.id %}" class="builds-list-edit-link">
                    <button type="button" class="builds-list-edit-btn" {% if edit_mode and edit_build_id == build.id %}disabled{% endif %}>Edit</button>
                </a>
            </li>
        {% endfor %}
        </ul>
    </div>
{% endif %}
{% if compatibility_issues %}
    <div class="build-compatibility-alert">
        <ul class="build-compatibility-list">
        {% for issue in compatibility_issues %}
            <li class="build-compatibility-item">{{ issue }}</li>
        {% endfor %}
        </ul>
    </div>
{% endif %}
<p class="build-form-title">Create New Build</p>
<form method="POST" action="" class="build-form">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="build-form-submit-btn">
        {% if edit_mode %}Update PC Build{% else %}Create PC Build{% endif %}
    </button>
    {% if edit_mode %}
        <a href="{% url 'build' %}" class="build-form-cancel-link">Cancel</a>
    {% endif %}
</form>

{% endblock content %}